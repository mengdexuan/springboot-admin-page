<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body><!--头部引入公共配置-->
<head th:fragment="footer">
        <script type="text/javascript" th:src="@{/lib/jquery/1.9.1/jquery.min.js}"></script>

        <script type="text/javascript" th:src="@{/app/js/page.js}"></script>

        <script type="text/javascript" th:src="@{/lib/layer/2.4/layer.js}"></script>
        <script type="text/javascript" th:src="@{/lib/sockjs/sockjs.min.js}"></script>
        <script type="text/javascript" th:src="@{/lib/stomp.js}"></script>
        <script type="text/javascript" th:src="@{/lib/switch/js/bootstrap-switch.js}"></script>
        <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>

        <script type="text/javascript" th:src="@{/lib/zTree/v3/js/jquery.ztree.all-3.5.min.js}"></script>
        <script type="text/javascript" th:src="@{/lib/layui2.5.6/layui.js}"></script>

        <script th:inline="javascript">
            var ctx = [[@{/}]];
                ctx = ctx.substr(0, ctx.length - 1);

                function refresh() {
                    window.location = location.href;
                }


                //清空form表单数据
                function clearFormData(formId) {
                    $("#"+formId).find('input[type=text],select,input[type=hidden]').each(function() {
                            $(this).val('');
                    });
                }
                
                function clickLi(idOfLi) {
                    $(".menu_dropdown").find("li").each(function (li) {
                        $(li).removeClass("current");
                    });
                    $(".menu_dropdown").find("dt").each(function (dt) {
                        $(dt).removeClass("selected");
                    });
                    $(".menu_dropdown").find("dd").each(function (dd) {
                        $(dd).removeAttr("style");
                    });

                    $("#" + idOfLi).parent().parent().prev().addClass("selected");
                    $("#" + idOfLi).parent().parent().attr({style: "display:block"});
                    $("#" + idOfLi).addClass("current");


                    var spanText = $("#" + idOfLi).parent().parent().prev().find("span:last").text();

                    $(".maincolor").next().next().text(spanText);
                    $(".maincolor").next().next().next().next().text($("#"+idOfLi).text());
                }

                // 自动展开textarea
                function autoSize(obj) {
                    var el = obj;
                    setTimeout(function () {
                        el.style.cssText = 'height:auto; padding:0';
                        el.style.cssText = 'height:' + (el.scrollHeight+10) + 'px';
                    }, 0);
                }

                //配置全局 header
            $.ajaxSettings.beforeSend = function(xhr,request){
                xhr.setRequestHeader('loginKey','meng123456');
            }
        </script>

        <script th:inline="javascript">

            $(document).ready(function () {
                if (window.WebSocket){
                    wsConfig();
                } else {
                    alert("浏览器不支持websocket技术通讯.");
                }
            });

            // webSocket 配置
            function wsConfig() {

                var href = window.location.href;
                href = href.replace('http','ws');

                var tempHref = href.split('back');
                href = tempHref[0]+"back/ws/time";

                // 指定websocket路径
                var websocket = new WebSocket(href);

                websocket.onmessage = function (event) {
                    var data = event.data;
                    $("#sysTime").text(data);
                };
            }
        </script>
</head>
</body>
</html>